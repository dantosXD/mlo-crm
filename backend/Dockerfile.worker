FROM node:20-bookworm-slim

WORKDIR /app

COPY backend/package*.json ./
COPY backend/prisma ./prisma
RUN npm ci

COPY backend/ ./
RUN npx prisma generate && npm run build

ENV NODE_ENV=production

CMD ["node", "dist/worker.js"]

